"use strict";(globalThis.webpackChunkbasaltpass_docs=globalThis.webpackChunkbasaltpass_docs||[]).push([[816],{1664(e,s,t){t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"config/backup-restore","title":"Backup & Restore","description":"Regular backups are essential for disaster recovery.","source":"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/current/config/backup-restore.md","sourceDirName":"config","slug":"/config/backup-restore","permalink":"/BasaltPass/zh-Hans/docs/config/backup-restore","draft":false,"unlisted":false,"editUrl":"https://github.com/BasaltBase/BasaltPass/tree/main/basaltpass-docs/docs/config/backup-restore.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Email Templates","permalink":"/BasaltPass/zh-Hans/docs/config/email-templates"},"next":{"title":"Upgrading BasaltPass","permalink":"/BasaltPass/zh-Hans/docs/config/upgrading"}}');var r=t(4848),a=t(8453);const i={sidebar_position:7},o="Backup & Restore",c={},l=[{value:"What to Backup",id:"what-to-backup",level:2},{value:"Backup Strategies",id:"backup-strategies",level:2},{value:"SQLite",id:"sqlite",level:3},{value:"PostgreSQL / MySQL",id:"postgresql--mysql",level:3},{value:"Restore",id:"restore",level:2}];function d(e){const s={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"backup--restore",children:"Backup & Restore"})}),"\n",(0,r.jsx)(s.p,{children:"Regular backups are essential for disaster recovery."}),"\n",(0,r.jsx)(s.h2,{id:"what-to-backup",children:"What to Backup"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Database"}),": The most critical component."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Config Files"}),": ",(0,r.jsx)(s.code,{children:"config.yaml"}),", ",(0,r.jsx)(s.code,{children:"settings.yaml"}),", ",(0,r.jsx)(s.code,{children:".env"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Keys"}),": ",(0,r.jsx)(s.code,{children:"JWT_SECRET"})," (if not in env), TLS certificates."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"backup-strategies",children:"Backup Strategies"}),"\n",(0,r.jsx)(s.h3,{id:"sqlite",children:"SQLite"}),"\n",(0,r.jsxs)(s.p,{children:["For SQLite, simply copy the ",(0,r.jsx)(s.code,{children:".db"})," file."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"cp basaltpass.db basaltpass.bak\n"})}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Note"}),": Ensure the application is stopped or the DB is in a safe state to avoid corruption."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"postgresql--mysql",children:"PostgreSQL / MySQL"}),"\n",(0,r.jsxs)(s.p,{children:["Use standard tools like ",(0,r.jsx)(s.code,{children:"pg_dump"})," or ",(0,r.jsx)(s.code,{children:"mysqldump"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# PostgreSQL\npg_dump -U user -h localhost dbname > backup.sql\n\n# MySQL\nmysqldump -u user -p dbname > backup.sql\n"})}),"\n",(0,r.jsx)(s.h2,{id:"restore",children:"Restore"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Stop the BasaltPass service."}),"\n",(0,r.jsx)(s.li,{children:"Restore the database from the backup file."}),"\n",(0,r.jsx)(s.li,{children:"Restore configuration files."}),"\n",(0,r.jsx)(s.li,{children:"Restart the service."}),"\n"]})]})}function p(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,s,t){t.d(s,{R:()=>i,x:()=>o});var n=t(6540);const r={},a=n.createContext(r);function i(e){const s=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(a.Provider,{value:s},e.children)}}}]);